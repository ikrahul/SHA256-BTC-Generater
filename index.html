<!DOCTYPE html>
<!-- Author: Rahul Ban rahulban@live.in-->
<!-- Github: https://github.com/ikrahul/SHA256-BTC-Generater-->

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SHA-256 Hasher & Bitcoin Address Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #5278b1;
            color: #333;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            background-color: #fff;
            padding: 40px 60px;
            border-radius: 12px;
            max-width: 700px;
            width: 90%;
            margin: 20px auto 20px auto;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2em;
            color: #4a5568;
        }

        label {
            display: block;
            margin-top: 20px;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }

        input[type="text"],
        input[type="number"] {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 1em;
            transition: border 0.3s ease;
        }

        input[type="text"]:focus,
        input[type="number"]:focus {
            border-color: #3182ce;
            outline: none;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            margin-top: 20px;
        }

        .checkbox-container input {
            margin-right: 10px;
            transform: scale(1.2);
            cursor: pointer;
        }

        .checkbox-container label {
            margin: 0;
            cursor: pointer;
            font-weight: 400;
            color: #555;
        }

        button {
            margin-top: 30px;
            width: 100%;
            padding: 14px 0;
            background-color: #3182ce;
            border: none;
            color: white;
            font-size: 1.1em;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #2c5282;
        }

        #result, #btcAddress, #btcBalance {
            margin-top: 25px;
            padding: 20px;
            background-color: #edf2f7;
            border-radius: 8px;
            word-break: break-all;
            white-space: pre-wrap;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.95em;
        }

        header {
            background-color: hwb(62 65% 6%);
            padding: 10px 60px;
            text-align: center;
            border-top: 1px solid #e2e8f0;
            margin-top: auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            border-top: 2px solid blue;
            border-bottom: 2px solid blue;
        }

        header .header-left {
            font-size: 1em;
            color: #555;
            margin-bottom: 0px;
        }

        header .header-right {
            display: flex;
            align-items: center;
        }

        header .header-right a {
            text-decoration: none;
            color: #3182ce;
            display: flex;
            align-items: center;
            font-size: 1em;
            transition: color 0.3s ease;
        }

        header .header-right a:hover {
            color: #2c5282;
        }

        header .header-right svg {
            margin-right: 8px;
            fill: currentColor;
        }
        
        footer {
            background-color: hwb(62 65% 6%);
            padding: 10px 60px;
            text-align: center;
            border-top: 1px solid #e2e8f0;
            margin-top: auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            border-top: 2px solid blue;
            border-bottom: 2px solid blue;
        }

        footer .footer-left {
            font-size: 1em;
            color: #555;
            margin-bottom: 0px;
        }

        footer .footer-right {
            display: flex;
            align-items: center;
        }

        footer .footer-right a {
            text-decoration: none;
            color: #3182ce;
            display: flex;
            align-items: center;
            font-size: 1em;
            transition: color 0.3s ease;
        }

        footer .footer-right a:hover {
            color: #2c5282;
        }

        footer .footer-right svg {
            margin-right: 8px;
            fill: currentColor;
        }

        /* Responsive Design */
        @media (max-width: 600px) {
            .container {
                padding: 30px 40px;
            }

            footer {
                padding: 20px 40px;
                flex-direction: column;
                align-items: center;
            }

            footer .footer-right {
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-left">üöÄ Convenient & Secure BTC brainwallet generater | Works totally offline ‚úÖ</div>
        <div class="header-right">
            <a href="https://github.com/ikrahul/SHA256-BTC-Generater" target="_blank" rel="noopener noreferrer">
                <!-- GitHub Star Icon -->
                <svg height="20" width="20" viewBox="0 0 16 16" aria-hidden="true">
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82a7.65 7.65 0 012.01-.27c.68 0 1.36.09 2.01.27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
                <!-- GitHub Star Count -->
                <span id="star-count">0</span>
            </a>
        </div>
    </header>
    <div class="container">
        <h1>SHA-256 Hasher & Bitcoin Address Generator</h1>
        <label for="inputText">Text to Hash:</label>
        <input type="text" id="inputText" placeholder="Enter your text here">

        <label for="hashTimes">Number of Times to Hash:</label>
        <input type="number" id="hashTimes" min="1" value="1">

        <div class="checkbox-container">
            <input type="checkbox" id="autoUpdate">
            <label for="autoUpdate">Auto-update Hash</label>
        </div>

        <div class="checkbox-container">
            <input type="checkbox" id="checkBalance">
            <label for="checkBalance">Check Balance</label>
        </div>

        <button id="hashButton">Hash</button>

        <div id="result">SHA-256 Hash</div>
        <div id="btcAddress">Bitcoin Address</div>
        <div id="btcBalance">Bitcoin Balance</div>
    </div>

    <footer>
        <div class="footer-left" style="color: black;">üöÄ Created with ‚ù§Ô∏è by Rahul Ban ¬© 2024</div>
        <div class="footer-right">
            <div class="github-profile-badge" data-user="ikrahul" </div>
            <script src="https://cdn.jsdelivr.net/gh/Rapsssito/github-profile-badge@latest/src/widget.min.js"></script>
        </div>
    </footer>

    <!-- Including External Libraries via CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/elliptic/6.5.4/elliptic.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

    <script>
        // Initialize elliptic curve
        const EC = elliptic.ec;
        const ec = new EC('secp256k1');

        // Base58 character set
        const BASE58_ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';

        /**
         * Converts a hexadecimal string to a byte array.
         * @param {string} hex - The hexadecimal string.
         * @returns {Uint8Array} - The resulting byte array.
         */
        function hexToBytes(hex) {
            const bytes = [];
            for (let c = 0; c < hex.length; c += 2) {
                bytes.push(parseInt(hex.substr(c, 2), 16));
            }
            return new Uint8Array(bytes);
        }

        /**
         * Encodes a byte array into a Base58 string.
         * @param {Uint8Array} bytes - The byte array to encode.
         * @returns {string} - The Base58 encoded string.
         */
        function base58Encode(bytes) {
            const digits = [0];
            for (let i = 0; i < bytes.length; i++) {
                let carry = bytes[i];
                for (let j = 0; j < digits.length; j++) {
                    carry += digits[j] << 8;
                    digits[j] = carry % 58;
                    carry = (carry / 58) | 0;
                }
                while (carry > 0) {
                    digits.push(carry % 58);
                    carry = (carry / 58) | 0;
                }
            }
            // Convert digits to the Base58 string
            let result = '';
            // Leading zeros
            for (let i = 0; i < bytes.length && bytes[i] === 0; i++) {
                result += '1';
            }
            // Convert digits to characters
            for (let i = digits.length - 1; i >= 0; i--) {
                result += BASE58_ALPHABET[digits[i]];
            }
            return result;
        }

        /**
         * Fetches the Bitcoin balance for a given address using Blockchain.info API.
         * @param {string} address - The Bitcoin address.
         * @returns {Promise<string>} - The balance in BTC as a string.
         */
        async function fetchBalance(address) {
            try {
                const response = await fetch(`https://blockchain.info/q/addressbalance/${address}`);
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const balanceSatoshi = await response.text();
                const balanceBTC = (parseInt(balanceSatoshi, 10) / 1e8).toFixed(8);
                return balanceBTC;
            } catch (error) {
                console.error('Error fetching balance:', error);
                return 'Error fetching balance.';
            }
        }

        /**
         * Computes the SHA-256 hash of a given message.
         * @param {string} message - The input message.
         * @returns {Promise<string>} - The SHA-256 hash as a hexadecimal string.
         */
        async function sha256(message) {
            const encoder = new TextEncoder();
            const data = encoder.encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }

        /**
         * Performs the hashing process and updates the UI accordingly.
         */
        async function performHashing() {
            const textInput = document.getElementById('inputText').value;
            const times = parseInt(document.getElementById('hashTimes').value, 10);
            const resultDiv = document.getElementById('result');
            const btcAddressDiv = document.getElementById('btcAddress');
            const btcBalanceDiv = document.getElementById('btcBalance');
            const checkBalance = document.getElementById('checkBalance').checked;

            if (times < 1) {
                resultDiv.textContent = 'Number of times to hash must be at least 1.';
                btcAddressDiv.textContent = '';
                btcBalanceDiv.textContent = '';
                return;
            }

            let currentHash = textInput;
            for (let i = 0; i < times; i++) {
                currentHash = await sha256(currentHash);
            }

            resultDiv.textContent = `SHA-256 Hash:\n${currentHash}`;
            generateBitcoinAddress(currentHash, btcAddressDiv, btcBalanceDiv, checkBalance);
        }

        /**
         * Generates a Bitcoin address from a given private key and updates the UI.
         * @param {string} privateKeyHex - The private key in hexadecimal format.
         * @param {HTMLElement} displayDiv - The div to display the Bitcoin address.
         * @param {HTMLElement} balanceDiv - The div to display the Bitcoin balance.
         * @param {boolean} checkBalance - Whether to fetch the balance.
         */
        function generateBitcoinAddress(privateKeyHex, displayDiv, balanceDiv, checkBalance) {
            try {
                // Create key pair from private key
                const key = ec.keyFromPrivate(privateKeyHex, 'hex');

                // Get the public key in compressed format (33 bytes)
                const publicKey = key.getPublic(true, 'hex');

                // Perform SHA-256 hashing on the public key
                const sha256Hash = CryptoJS.SHA256(CryptoJS.enc.Hex.parse(publicKey)).toString(CryptoJS.enc.Hex);

                // Perform RIPEMD-160 hashing on the result of SHA-256
                const ripemd160Hash = CryptoJS.RIPEMD160(CryptoJS.enc.Hex.parse(sha256Hash)).toString(CryptoJS.enc.Hex);

                // Add network byte (0x00 for mainnet)
                const networkByte = '00';
                const extendedRipemd160 = networkByte + ripemd160Hash;

                // Compute checksum: SHA-256 twice
                const firstSHA = CryptoJS.SHA256(CryptoJS.enc.Hex.parse(extendedRipemd160)).toString(CryptoJS.enc.Hex);
                const secondSHA = CryptoJS.SHA256(CryptoJS.enc.Hex.parse(firstSHA)).toString(CryptoJS.enc.Hex);
                const checksum = secondSHA.substring(0, 8); // First 4 bytes (8 hex chars)

                // Concatenate extended RIPEMD-160 hash with checksum
                const binaryAddress = extendedRipemd160 + checksum;

                // Convert hex string to byte array
                const addressBytes = hexToBytes(binaryAddress);

                // Convert to Base58
                const btcAddress = base58Encode(addressBytes);

                displayDiv.textContent = `Bitcoin Address:\n${btcAddress}`;

                // If checkBalance is enabled, fetch and display the balance
                if (checkBalance) {
                    fetchBalance(btcAddress).then(balance => {
                        if (balance === 'Error fetching balance.') {
                            balanceDiv.textContent = balance;
                        } else {
                            balanceDiv.textContent = `Balance: ${balance} BTC`;
                        }
                    });
                } else {
                    balanceDiv.textContent = '';
                }
            } catch (error) {
                displayDiv.textContent = 'Error generating Bitcoin address.';
                balanceDiv.textContent = '';
                console.error(error);
            }
        }

        function setupAutoUpdate() {
            const autoUpdateCheckbox = document.getElementById('autoUpdate');
            const inputText = document.getElementById('inputText');
            const hashTimes = document.getElementById('hashTimes');

            function handleInputChange() {
                if (autoUpdateCheckbox.checked) {
                    performHashing();
                }
            }

            if (autoUpdateCheckbox.checked) {
                inputText.addEventListener('input', handleInputChange);
                hashTimes.addEventListener('input', handleInputChange);
            } else {
                inputText.removeEventListener('input', handleInputChange);
                hashTimes.removeEventListener('input', handleInputChange);
            }
        }

        document.getElementById('hashButton').addEventListener('click', performHashing);

        document.getElementById('autoUpdate').addEventListener('change', () => {
            setupAutoUpdate();
            if (document.getElementById('autoUpdate').checked) {
                performHashing();
            }
        });

        // Initialize auto-update based on the checkbox state on page load
        window.addEventListener('DOMContentLoaded', () => {
            setupAutoUpdate();
            if (document.getElementById('autoUpdate').checked) {
                performHashing();
            }

            // Fetch GitHub stars on page load
            fetchGitHubStars();
        });

        /**
         * Fetches the number of GitHub stars for the repository and updates the star count.
         */
        async function fetchGitHubStars() {
            const repo = 'ikrahul/SHA256-BTC-Generater'; // Replace with your GitHub repo in the format 'username/repo'
            const starCountSpan = document.getElementById('star-count');
            try {
                const response = await fetch(`https://api.github.com/repos/${repo}`);
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const repoData = await response.json();
                starCountSpan.textContent = repoData.stargazers_count;
            } catch (error) {
                console.error('Error fetching GitHub stars:', error);
                starCountSpan.textContent = 'N/A';
            }
        }
    </script>
</body>
</html>